(this.webpackJsonpstocks_front=this.webpackJsonpstocks_front||[]).push([[0],{165:function(e,t,a){e.exports=a.p+"static/media/Githublogo.ce89173e.svg"},198:function(e,t,a){e.exports=a(405)},203:function(e,t,a){},220:function(e,t,a){},399:function(e,t,a){},400:function(e,t,a){},405:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(60),c=a.n(s),o=a(21),l=a(22),i=a(23),u=a(24),m=(a(203),a(155)),k=a.n(m),g=(a(220),a(94)),h=a(26),d=(a(399),function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.chartValues.map((function(e){return Number(e.value)})),t=Math.max.apply(Math,Object(g.a)(e)),a=Math.min.apply(Math,Object(g.a)(e));return a>>=0,t=Math.ceil(t),r.a.createElement(r.a.Fragment,null,r.a.createElement(h.d,{width:"60%",className:"Chart"},r.a.createElement(h.c,{data:this.props.chartValues,margin:{top:15,right:40,left:-15,bottom:15}},r.a.createElement(h.a,{vertical:!1,stroke:"#ebf3f0"}),r.a.createElement(h.f,{dataKey:"date",stroke:"black"}),r.a.createElement(h.g,{domain:[a,t],stroke:"black"}),r.a.createElement(h.e,null),r.a.createElement(h.b,{dataKey:"value",stroke:"#8984d8",dot:!1,strokeWidth:"0.5%"}))))}}]),a}(n.Component)),f=(a(400),function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onTextChanged=function(e){var t=n.props.items,a=e.target.value,r=[];if(a.length>0){var s=new RegExp("^".concat(a),"i");r=t.sort().filter((function(e){return s.test(e)}))}n.setState((function(){return{suggestions:r,text:a}}))},n.state={suggestions:[],text:""},n}return Object(l.a)(a,[{key:"suggestionSelected",value:function(e){this.setState((function(){return{text:"",suggestions:[]}})),this.props.callbackFromApp(e)}},{key:"renderSuggestions",value:function(){var e=this,t=this.state.suggestions;return 0===t.length?null:r.a.createElement("ul",null,t.map((function(t){return r.a.createElement("li",{key:t,onClick:function(){return e.suggestionSelected(t)}}," ",t," ")})))}},{key:"render",value:function(){var e=this.state.text;return r.a.createElement("div",{className:"AutoCompleteText"},r.a.createElement("input",{value:e,onChange:this.onTextChanged,type:"text"}),this.renderSuggestions())}}]),a}(r.a.Component)),p=a(166),v=a.n(p),S=a(419),E=a(165),b=a.n(E),L=function(e,t){return((e-t)/t*100).toFixed(2)},O=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).getStockFromSearchBar=function(e){var t=n.state.stockListFromApi.find((function(t){return t.name===e}));if(0!==JSON.parse(t.values).length)if(n.state.stockList.find((function(e){return e.symbol===t.symbol})))alert("".concat(t.name," on jo listalla. Valitse toinen osake."));else{var a=n.state.stockList;a.push(t),localStorage.setItem("stockList",JSON.stringify(a)),n.handleStockChange(t.id),n.setState({stockList:a})}else alert("Valitettavasti osakkeen tiedoissa on ongelma. Kokeile jotain toista osaketta.")},n.handleDelete=function(e){var t=n.state.stockList.indexOf(e),a=n.state.stockList;a.splice(t,1),localStorage.setItem("stockList",JSON.stringify(a)),n.setState({stockList:a})},n.handleStockChange=function(e){var t=n.state.stockListFromApi.find((function(t){return t.id===e})),a=JSON.parse(t.values),r=a[a.length-1].value,s=a[0].value,c=L(r,s);c+="%",n.setState({values:a,currentStockChange:c,currentStock:t.name})},n.setStartStock=function(e){var t=e[0],a=JSON.parse(t.values),r=a[a.length-1].value,s=a[0].value,c=L(r,s);c+="%";var o=t.name;n.setState({values:a,currentStockChange:c,currentStock:o})},n.refreshLocalStorage=function(e,t){if(JSON.parse(t[0].values)[0].date!==JSON.parse(e[0].values)[0].date){for(var a=function(a){var n=t.find((function(t){return t.id===e[a].id}));e[a].values=n.values},r=0;r<e.length;r++)a(r);localStorage.setItem("stockList",JSON.stringify(e))}n.setState({stockList:e,isLoading:!1}),console.log(n.state.isLoading),n.setStartStock(e)},n.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("stockList"));console.log(e),null!==e&&0!==e.length||n.setState({isLoading:!1});var t="".concat("https://osakeseuranta.net","/api");k.a.get(t).then((function(t){null!==e&&0!==e.length&&n.refreshLocalStorage(e,t.data),n.setState({stockListFromApi:t.data})}))},n.renderStockList=function(){return 0===n.state.stockList.length||0===n.state.stockList?null:r.a.createElement("ul",null,n.state.stockList.map((function(e){return r.a.createElement("li",{key:e.id}," ",r.a.createElement("button",{className:"Listobject",onClick:function(){return n.handleStockChange(e.id)}}," ",e.name," ")," ",r.a.createElement(v.a,{onClick:function(){return n.handleDelete(e)},className:"Deletebutton"})," ")})))},n.renderMain=function(){return 0!==n.state.stockList.length&&!1===n.state.isLoading?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Headers"},r.a.createElement("p",{className:"Stockheader"}," ",n.state.currentStock," "),r.a.createElement("p",{className:"Stockpercentage",style:{color:Number(n.state.currentStockChange.substring(0,n.state.currentStockChange.length-1))>=0?"green":"red"}}," ",n.state.currentStockChange," ")),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Container"},r.a.createElement("div",{className:"Stocklist"},n.renderStockList()),r.a.createElement(d,{chartValues:n.state.values})),r.a.createElement("div",{className:"Addstock"},r.a.createElement("p",null," Lis\xe4\xe4 osake "),r.a.createElement(f,{items:n.state.stockListFromApi.map((function(e){return e.name})),callbackFromApp:n.getStockFromSearchBar})))):!1===n.state.isLoading?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null," Osakeseuranta "),r.a.createElement("div",{className:"Mainstarter"},r.a.createElement("div",{className:"Infobox"},r.a.createElement("p",null," Lis\xe4\xe4 osake seurantalistaan k\xe4ytt\xe4m\xe4ll\xe4 hakupalkkia. Osakkeeksi on mahdollista valita mik\xe4 tahansa Helsingin p\xf6rssin osakkeista. ")),r.a.createElement("div",{className:"AddstockStarter"},r.a.createElement("p",null," Lis\xe4\xe4 osake "),r.a.createElement(f,{items:n.state.stockListFromApi.map((function(e){return e.name})),callbackFromApp:n.getStockFromSearchBar})))):r.a.createElement("div",{className:"Loading"},r.a.createElement(S.a,{disableShrink:!0}))},n.state={currentStock:"",currentStockChange:"",values:[],stockListFromApi:[],stockList:[],isLoading:!0},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"https://github.com/arttusa/Stocks",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{className:"Githublogo",src:b.a,alt:"Github Logo"})),this.renderMain())}}]),a}(r.a.Component),N=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"Wholepage"},r.a.createElement(O,null))}}]),a}(r.a.Component),y=a(168);c.a.render(r.a.createElement(y.a,null,r.a.createElement(N,null)),document.getElementById("root"))}},[[198,1,2]]]);
//# sourceMappingURL=main.2c2a8b93.chunk.js.map